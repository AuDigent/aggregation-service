diff --git a/build_defs/aws/enclave/container.bzl b/build_defs/aws/enclave/container.bzl
index 3a407dd0..05ae4dc2 100644
--- a/build_defs/aws/enclave/container.bzl
+++ b/build_defs/aws/enclave/container.bzl
@@ -14,7 +14,7 @@
 
 load("@io_bazel_rules_docker//container:container.bzl", "container_image")
 
-_PROXY_BINARY_FILES = [Label("//cc/aws/proxy/src:proxy_preload"), Label("//cc/aws/proxy/src:proxify")]
+_PROXY_BINARY_FILES = [Label("//cc/aws/proxy:libproxy_preload.so"), Label("//cc/aws/proxy:proxify")]
 
 def java_enclave_image(
         *,
diff --git a/cc/aws/proxy/BUILD b/cc/aws/proxy/BUILD
index c102f74f..a6554501 100644
--- a/cc/aws/proxy/BUILD
+++ b/cc/aws/proxy/BUILD
@@ -76,10 +76,13 @@ genrule(
       bazel/cc/aws/proxy:build_container \
       bash -c '
         set -eux
-        yum install gcc gcc-c++ tar git -y > /dev/null
+        yum install glibc-devel-2.26-60.amzn2 glibc-headers-2.26-60.amzn2 gcc-7.3.1-15.amzn2 gcc-c++-7.3.1-15.amzn2 tar git -y > /dev/null
         tar xf /source_code.tar -C /
         cd /scp
-        bazel build //cc/aws/proxy/src:proxify //cc/aws/proxy/src:proxy //cc/aws/proxy/src:proxy_preload
+        bazel build \
+          //cc/aws/proxy/src:proxify \
+          //cc/aws/proxy/src:proxy \
+          //cc/aws/proxy/src:proxy_preload
         cp $$(bazel info bazel-bin)/cc/aws/proxy/src/{libproxy_preload.so,proxify,proxy} /output
       '
     cp "$${OUTPUT_DIR}/libproxy_preload.so" $(location libproxy_preload.so)
